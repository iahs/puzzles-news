<div class="header">
    <h1>Search</h1>
</div>

<div class="content l-box">

<div class="pure-g-r">
    <div class="pure-u-2-3">
        <h3>Add tags</h3>
        <form class="pure-form">
            <input type="text" ng-model="tagSearch" placeholder="Search">
        </form>
        <br/>
        <a ng-repeat="tag in tags | filter:tagSearch | limitTo:30" ng-click="addQueryTag(tag)" class="pure-button button-xsmall">
            {{ tag.name }}
        </a>
    </div>
    <div class="pure-u-1-3">
        <h3>Selected tags</h3>
        <a ng-repeat="tag in queryTags" ng-click="removeQueryTag(tag)" class="pure-button pure-button-active button-small">
            {{ tag.name }}
        </a>
    </div>
</div>

    <form ng-submit="search()" class="pure-form">
        <input ng-model="search.query" class="pure-input-1"/>
        <input type="submit" class="pure-button pure-button-primary pure-u-1" value="Search"/>
    </form>

    <div ng-repeat="post in searchResults" id="post-{{ post.id }}">
        <h3>{{ post.title }}   {{ post.created_at }}</h3>
        <a ng-repeat="tag in post.tags" class="pure-button button-xsmall">{{ tag.name }}</a>
        <div ng-hide="post.expanded" ng-click="expandPost(post.id, post.pos)" class="truncated-post" slide-toggle="#full-post-{{post.id}}">
            <p>{{ post.body | unescape | truncate:maxPostLength }} <i ng-if="post.body.length > maxPostLength">Click to expand</i></p>
        </div>
        <div id="full-post-{{post.id}}" class="slideable" duration=".5s">
            <p>{{ post.body | unescape }}</p>
        </div>
    </div>
</div>


